<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> RAG and LoRA | namdarine </title> <meta name="author" content="Nam Gyu Lee"> <meta name="description" content="Understand the concept of RAG and LoRA"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://namdarine.github.io/blog/2025/RAG&amp;LoRA/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> namdarine </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Home </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">RAG and LoRA</h1> <p class="post-meta"> March 01, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/blog/tag/wis"> <i class="fa-solid fa-hashtag fa-sm"></i> WIS</a>     ·   <a href="/blog/category/ml"> <i class="fa-solid fa-tag fa-sm"></i> ML</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="rag-retrieval-augmented-generation">RAG (Retrieval-Augmented Generation)</h1> <h2 id="what-is-rag">What is RAG?</h2> <p>RAG is a technique that helps to generate and up-to-date information by adding an information retrieval (Retrieval) function to the Large Language Model (LLM). While existing LLMs rely on pre-trained data to generate answers, RAG finds relevant information from an external database and augments the model’s response.<br> This is cost-effective approach to improve LLM results to maintain relevance, accuracy, and utility in various situation.</p> <h2 id="key-components-of-rag">Key Components of RAG</h2> <h3 id="retriever">Retriever</h3> <ul> <li>Searches for relevant documents from a <strong>vector</strong> database, such as FAISS, Pinecone, Weaviate, Qdrant</li> <li>Uses BM25, Dense Passage Retrieval (DPR), or ColBERT for efficient information retrieval</li> </ul> <h3 id="generator">Generator</h3> <ul> <li>Uses the retrieved documents as context to generate text</li> <li>Typically based on transformer models like GPT, MPT or LLaMA</li> </ul> <h2 id="how-rag-works">How RAG Works</h2> <ol> <li>User Query $ \rightangle $ Vector Representation <ul> <li>The input query is transformed into a vector and compared against pre-stored documents in a vector database</li> </ul> </li> <li>Document Retrieval <ul> <li>The retriever fetches relevant documents based on similarity</li> </ul> </li> <li>LLM Response Generation <ul> <li>The LLM uses retrieved documents as additional context to generate a response</li> </ul> </li> </ol> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/rag-480.webp 480w,/assets/img/rag-800.webp 800w,/assets/img/rag-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/rag.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h2 id="advantages">Advantages</h2> <ul> <li>Incorporates real-time data without retraining the model. This reflects the latest information even the model was not trained about.</li> <li>Reduces hallucinations by providing factual references. This improves reliability</li> <li>Allows customization for specific domains, such as legal, medical, finance</li> </ul> <p>It can adapt to changing requirements or departmental use by controlling and changing the information source of LLM. It can also allow developers to limit the search for sensitive information to different levels of authentication and allow LLM to generate appropriate responses. It can also troubleshoot and correct issues when LLM references sources of misinformation for specific questions. Organizations can more confidently implement Generative AI technologies for a wider range of applications.</p> <h1 id="lora-low-rank-adaptation">LoRA (Low-Rank Adaptation)</h1> <h2 id="what-is-lora">What is LoRA?</h2> <blockquote> <p>Low-Rank Adaptation is lightweight fine-tuning method that adapts LLMs <strong>without modifying their core weights</strong>. Instead of traing the entire models, LoRA adds small trainable matrices to selected layers.</p> </blockquote> <h2 id="key-concept-of-lora">Key Concept of LoRA</h2> <p>Instead of updating directly the weight matrix of the transformer model, LoRA introduces two smaller matrices that capture only the necessary modifications. That is, a method of learning only small additional matrices while maintaining the main weights of the original model and changing only the necessary parts.<br> This method drastically reduces memory usage and computational costs while maintaining fine-tuning effectiveness.</p> <h2 id="how-lora-works">How LoRA Works</h2> <ol> <li>The pre-trained model weights (W) remain frozen and introduces low-rank matrices (A and B) to learn task-specific modifications.</li> <li>When there is input data, tune the model with the updated value of the original weights (W) + new low-rank matrices (A and B).</li> <li>After training, only saving the added matrices (A, B) can maintain the lightweight model while reducing GPU memory consumption.</li> </ol> <h2 id="advantages-of-lora">Advantages of LoRA</h2> <ul> <li> <strong>Efficient memory usage</strong>: requires significantly less GPU VRAM compared with Full Fine-Tuning</li> <li> </li> </ul> <h1 id="reference">Reference</h1> <ul> <li>image: What Is Rag? - Retrieval-Augmented Generation AI Explained - AWS, aws.amazon.com/what-is/retrieval-augmented-generation/. Accessed 12 Mar. 2025.</li> </ul> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/ML-Final_Prep/">Machine Learning Final Preparation</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/2025-03-19-ConvNeXt-V2-review/"></a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/Binary-Search-Tree/">Binary Search Tree (BST)</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/GPT/">What is GPT?</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Security-Security_Policy/">Security Policy</a> </li> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Nam Gyu Lee. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>